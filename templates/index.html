<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <title>BG_Remove</title>
    
</head>

<body>
  <div class="container">
    <div class="row">
      <div class="row">
        <h1>Welcome to Bg remove</h1>
      </div>
      <div class="input-group mb-3">
        <button type="button" class="btn btn-outline-secondary">Choose</button>
        <button type="button" class="btn btn-outline-secondary dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown" aria-expanded="false">
          <span class="visually-hidden">Toggle Dropdown</span>
        </button>
        <ul id="user_input" class="dropdown-menu">
          <li><a class="dropdown-item active" href="#" id="upload_option">Upload image</a></li>
          <li><a class="dropdown-item" href="#" id="base64_option">Enter Base 64</a></li>
        </ul>
        <input id="main_input" type="text" class="form-control" aria-label="Text input with segmented dropdown button">
      </div>
      <div class="row">
        <input id="upload_img" type="file" class="form-control" placeholder="Upload image" aria-label="Upload image">
        <input id="base64" type="text" class="form-control" style="display: none;" placeholder="Enter base64" aria-label="Enter base64">
      </div>
      <div class="row mt-3">
        <button id="proceed_btn" type="button" class="btn btn-success" disabled>Process Image</button>
      </div>
    </div>
  </div>

  <!-- Bootstrap Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const uploadOption = document.getElementById('upload_option');
      const base64Option = document.getElementById('base64_option');
      const uploadImg = document.getElementById('upload_img');
      const base64Input = document.getElementById('base64');
      const mainInput = document.getElementById('main_input');
      const proceedBtn = document.getElementById('proceed_btn');
      
      // Set initial state (Upload image selected by default)
      let currentSelection = 'upload';
      updateUI();

      // Handle dropdown selection
      uploadOption.addEventListener('click', function(e) {
        e.preventDefault();
        currentSelection = 'upload';
        uploadOption.classList.add('active');
        base64Option.classList.remove('active');
        updateUI();
      });

      base64Option.addEventListener('click', function(e) {
        e.preventDefault();
        currentSelection = 'base64';
        base64Option.classList.add('active');
        uploadOption.classList.remove('active');
        updateUI();
      });

      // Handle file upload
      uploadImg.addEventListener('change', function(e) {
        checkInputValidity();
      });

      // Handle base64 input
      base64Input.addEventListener('input', function(e) {
        checkInputValidity();
      });

      // Proceed button click handler
      proceedBtn.addEventListener('click', function() {
        if (currentSelection === 'upload' && uploadImg.files.length > 0) {
          console.log("Processing uploaded file:", uploadImg.files[0].name);
          // Process the file here
        } else if (currentSelection === 'base64' && base64Input.value.trim() !== '') {
          console.log("Processing base64 string");
          // Process the base64 string here
        }
      });

      function updateUI() {
        if (currentSelection === 'upload') {
          uploadImg.style.display = 'block';
          base64Input.style.display = 'none';
          mainInput.placeholder = "Upload an image";
        } else {
          uploadImg.style.display = 'none';
          base64Input.style.display = 'block';
          mainInput.placeholder = "Enter base64 string";
        }
        checkInputValidity();
      }

      function checkInputValidity() {
        if (currentSelection === 'upload') {
          proceedBtn.disabled = uploadImg.files.length === 0;
        } else {
          proceedBtn.disabled = base64Input.value.trim() === '';
        }
      }
    });
  </script>
</body>
</html>